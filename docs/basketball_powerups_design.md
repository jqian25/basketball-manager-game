# 篮球经理版超级玛丽+愤怒的小鸟设计文档

## 一、超级玛丽式道具系统

### 1. 篮球币（替代金币）
- **外观**: 旋转的橙色篮球
- **获取方式**: 
  - 打开金色宝箱
  - 完成投篮关卡
  - 击败障碍物
- **作用**: 游戏货币，用于购买道具和升级

### 2. 能量篮球（替代蘑菇）
- **外观**: 发光的红色篮球
- **效果**: 篮球经理变大，投篮能力+50%，持续30秒
- **动画**: 角色放大1.5倍，周围有能量光环

### 3. 火焰篮球（替代火焰花）
- **外观**: 燃烧的篮球
- **效果**: 可以发射火焰篮球攻击障碍物
- **操作**: 按空格键发射
- **弹道**: 抛物线轨迹

### 4. 护盾篮球（替代星星）
- **外观**: 闪光的金色篮球
- **效果**: 无敌状态，持续10秒
- **视觉**: 角色周围旋转的篮球护盾

### 5. 加速鞋
- **外观**: 红色运动鞋
- **效果**: 移动速度+100%，持续20秒

## 二、愤怒的小鸟式投篮系统

### 1. 篮球类型

#### 普通篮球（红色小鸟）
- **颜色**: 橙色
- **特性**: 标准弹道，无特殊能力
- **重量**: 中等

#### 加速篮球（黄色小鸟）
- **颜色**: 黄色
- **特性**: 点击后加速冲刺
- **用途**: 穿透障碍物

#### 爆炸篮球（黑色炸弹鸟）
- **颜色**: 黑色带红色火焰
- **特性**: 撞击后爆炸，范围伤害
- **爆炸半径**: 100px

#### 分裂篮球（蓝色小鸟）
- **颜色**: 蓝色
- **特性**: 点击后分裂成3个小篮球
- **用途**: 多目标攻击

#### 回旋篮球（绿色小鸟）
- **颜色**: 绿色
- **特性**: 回旋镖效果，可以返回
- **用途**: 击中背面目标

### 2. 投篮机制

#### 弹弓系统
- **操作**: 鼠标拖拽篮球，松开发射
- **力度**: 拖拽距离决定力度
- **角度**: 拖拽方向决定角度
- **最大力度**: 1000
- **轨迹预览**: 显示虚线弹道

#### 物理参数
- **重力**: 800
- **空气阻力**: 0.02
- **弹性**: 0.6
- **摩擦力**: 0.5

### 3. 关卡设计

#### 关卡结构
- **世界1**: 训练场（10关）
- **世界2**: 街头篮球（10关）
- **世界3**: 职业赛场（10关）
- **世界4**: 世界锦标赛（10关）

#### 目标类型
1. **篮筐目标**: 投进篮筐得分
2. **障碍物**: 木箱、玻璃、石块
3. **移动目标**: 移动的篮筐
4. **多篮筐**: 需要投进多个篮筐

#### 评分系统
- **3星**: 使用1-2个篮球完成
- **2星**: 使用3-4个篮球完成
- **1星**: 使用5+个篮球完成
- **0星**: 失败

## 三、地图中的宝箱系统

### 1. 宝箱类型

#### 金色宝箱
- **内容**: 10-50个篮球币
- **刷新**: 每5分钟随机刷新
- **位置**: 地图随机位置
- **动画**: 闪光+跳动

#### 银色宝箱
- **内容**: 能量道具（能量篮球、火焰篮球等）
- **刷新**: 每10分钟随机刷新
- **位置**: 固定位置
- **动画**: 银色光芒

#### 关卡入口
- **外观**: 带有关卡编号的传送门
- **功能**: 点击进入投篮关卡
- **解锁**: 完成前一关卡后解锁
- **位置**: 地图固定位置

### 2. 交互机制

#### 靠近检测
- **检测范围**: 角色周围100px
- **视觉反馈**: 宝箱放大+闪烁
- **提示**: 显示"按E打开"

#### 打开动画
- **宝箱打开**: 0.5秒动画
- **道具飞出**: 抛物线飞向角色
- **音效**: 开箱音效+获得音效

## 四、技术实现

### 1. 使用的技术
- **游戏引擎**: Phaser 3
- **物理引擎**: Phaser.Physics.Matter
- **动画**: Phaser.Tweens
- **粒子效果**: Phaser.GameObjects.Particles

### 2. 场景结构
```
BasketballCourtScene (主地图)
  ├─ 角色移动系统
  ├─ 宝箱生成系统
  ├─ 道具收集系统
  └─ 关卡入口系统

ShootingGameScene (投篮关卡)
  ├─ 弹弓系统
  ├─ 物理引擎
  ├─ 关卡数据
  └─ 评分系统
```

### 3. 数据结构

#### 道具数据
```typescript
interface PowerUp {
  id: string;
  name: string;
  type: 'energy' | 'fire' | 'shield' | 'speed';
  duration: number;
  effect: number;
  icon: string;
}
```

#### 篮球数据
```typescript
interface Basketball {
  id: string;
  name: string;
  type: 'normal' | 'speed' | 'bomb' | 'split' | 'boomerang';
  color: number;
  mass: number;
  specialAbility?: () => void;
}
```

#### 关卡数据
```typescript
interface Level {
  world: number;
  level: number;
  name: string;
  basketballs: Basketball[];
  targets: Target[];
  obstacles: Obstacle[];
  stars: [number, number, number]; // 3星、2星、1星所需篮球数
}
```

